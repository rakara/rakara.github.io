<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#0a0a0a">
    <title>TickRide - Your Journey Begins</title>
    
    <!-- PWA Icons -->
    <link rel="icon" type="image/png" sizes="32x32" href="/ride/icons/favicon.png">
    <link rel="icon" type="image/x-icon" href="/ride/icons/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/ride/icons/apple-touch-icon.png">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Leaflet CSS for Maps -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap');

        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #141414;
            --bg-tertiary: #1e1e1e;
            --text-primary: #ffffff;
            --text-secondary: #a0a0a0;
            --accent-primary: #00ff88;
            --accent-secondary: #00ccff;
            --accent-gradient: linear-gradient(135deg, #00ff88 0%, #00ccff 100%);
            --danger: #ff3366;
            --warning: #ffaa00;
            --card-shadow: 0 8px 32px rgba(0, 255, 136, 0.1);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Outfit', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            overflow-x: hidden;
            position: relative;
        }

        /* Animated background */
        body::before {
            content: '';
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: 
                radial-gradient(circle at 20% 50%, rgba(0, 255, 136, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(0, 204, 255, 0.05) 0%, transparent 50%);
            animation: backgroundFloat 20s ease-in-out infinite;
            pointer-events: none;
            z-index: 0;
        }

        @keyframes backgroundFloat {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(5%, 5%) rotate(120deg); }
            66% { transform: translate(-5%, 5%) rotate(240deg); }
        }

        .app-container {
            max-width: 480px;
            margin: 0 auto;
            min-height: 100vh;
            position: relative;
            z-index: 1;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        header {
            padding: 20px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(10, 10, 10, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            position: sticky;
            top: 0;
            z-index: 100;
            animation: slideDown 0.6s ease-out;
        }

        @keyframes slideDown {
            from { transform: translateY(-100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .logo {
            font-size: 28px;
            font-weight: 800;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -0.5px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--accent-gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: var(--transition);
        }

        .user-avatar:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.4);
        }

        /* Main Content */
        main {
            flex: 1;
            padding: 24px;
            animation: fadeInUp 0.8s ease-out 0.2s both;
        }

        @keyframes fadeInUp {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .greeting {
            margin-bottom: 32px;
        }

        .greeting h1 {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 8px;
            letter-spacing: -0.5px;
        }

        .greeting p {
            color: var(--text-secondary);
            font-size: 16px;
        }

        /* Search Card */
        .search-card {
            background: var(--bg-secondary);
            border-radius: 24px;
            padding: 20px;
            margin-bottom: 24px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: var(--card-shadow);
            transition: var(--transition);
        }

        .search-card:hover {
            border-color: rgba(0, 255, 136, 0.2);
        }

        /* Route input stack */
        .route-inputs {
            display: flex;
            flex-direction: column;
            gap: 0;
            position: relative;
        }

        .route-line {
            position: absolute;
            left: 19px;
            top: 46px;
            bottom: 46px;
            width: 2px;
            background: linear-gradient(to bottom, var(--accent-primary), var(--accent-secondary));
            z-index: 0;
        }

        .search-input {
            display: flex;
            align-items: center;
            background: var(--bg-tertiary);
            border-radius: 14px;
            padding: 14px 14px 14px 16px;
            border: 1px solid rgba(255,255,255,0.06);
            transition: var(--transition);
            position: relative;
            z-index: 1;
        }

        .search-input:focus-within {
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px rgba(0, 255, 136, 0.1);
        }

        .search-input + .search-input {
            margin-top: 8px;
        }

        /* Dot indicators */
        .route-dot {
            width: 12px; height: 12px;
            border-radius: 50%;
            flex-shrink: 0;
            margin-right: 12px;
        }
        .route-dot.pickup  { background: var(--accent-primary); box-shadow: 0 0 8px rgba(0,255,136,.5); }
        .route-dot.dropoff { background: var(--accent-secondary); box-shadow: 0 0 8px rgba(0,204,255,.5); }

        .search-input input {
            flex: 1;
            background: none;
            border: none;
            outline: none;
            color: var(--text-primary);
            font-size: 15px;
            font-family: 'Outfit', sans-serif;
            min-width: 0;
        }

        .search-input input::placeholder { color: var(--text-secondary); }

        .input-clear {
            background: none; border: none; color: var(--text-secondary);
            font-size: 18px; cursor: pointer; padding: 0 4px; line-height: 1;
            transition: var(--transition); flex-shrink: 0;
        }
        .input-clear:hover { color: var(--accent-primary); }

        /* Swap button */
        .swap-btn {
            width: 32px; height: 32px;
            background: var(--bg-primary);
            border: 1px solid rgba(0,255,136,.3);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: var(--transition);
            position: absolute; right: 14px; top: 50%; transform: translateY(-50%);
            font-size: 15px; z-index: 10;
        }
        .swap-btn:hover { background: rgba(0,255,136,.1); border-color: var(--accent-primary); transform: translateY(-50%) rotate(180deg); }

        /* Autocomplete dropdown */
        .autocomplete-dropdown {
            position: absolute;
            left: 0; right: 0;
            top: calc(100% + 6px);
            background: var(--bg-secondary);
            border: 1px solid rgba(0,255,136,.2);
            border-radius: 16px;
            overflow: hidden;
            z-index: 9999;
            box-shadow: 0 16px 40px rgba(0,0,0,.6);
            display: none;
        }
        .autocomplete-dropdown.visible { display: block; }

        .ac-item {
            display: flex; align-items: flex-start; gap: 12px;
            padding: 14px 16px;
            cursor: pointer;
            transition: var(--transition);
            border-bottom: 1px solid rgba(255,255,255,.04);
        }
        .ac-item:last-child { border-bottom: none; }
        .ac-item:hover { background: rgba(0,255,136,.06); }

        .ac-icon {
            width: 32px; height: 32px; border-radius: 10px;
            background: var(--bg-tertiary);
            display: flex; align-items: center; justify-content: center;
            font-size: 15px; flex-shrink: 0; margin-top: 2px;
        }
        .ac-name { font-size: 14px; font-weight: 600; line-height: 1.3; }
        .ac-address { font-size: 12px; color: var(--text-secondary); margin-top: 2px; line-height: 1.4; }

        .ac-loading, .ac-empty {
            padding: 16px; text-align: center;
            color: var(--text-secondary); font-size: 13px;
        }

        /* Route summary strip */
        .route-summary {
            display: none;
            background: linear-gradient(135deg, rgba(0,255,136,.08), rgba(0,204,255,.08));
            border: 1px solid rgba(0,255,136,.2);
            border-radius: 16px;
            padding: 14px 18px;
            margin-top: 14px;
            gap: 0;
        }
        .route-summary.visible { display: flex; justify-content: space-between; align-items: center; }

        .rs-item { text-align: center; flex: 1; }
        .rs-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 16px; font-weight: 700;
            background: var(--accent-gradient);
            -webkit-background-clip: text; background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .rs-label { font-size: 11px; color: var(--text-secondary); margin-top: 2px; text-transform: uppercase; letter-spacing: .4px; }
        .rs-divider { width: 1px; height: 36px; background: rgba(255,255,255,.08); }

        /* Quick saved places */
        .location-options {
            display: flex;
            gap: 10px;
            margin-top: 14px;
        }

        .location-btn {
            flex: 1;
            padding: 10px 8px;
            background: var(--bg-tertiary);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            font-family: 'Outfit', sans-serif;
            white-space: nowrap;
        }

        .location-btn:hover {
            background: var(--bg-primary);
            border-color: var(--accent-primary);
            transform: translateY(-2px);
        }

        /* Ride Options */
        .ride-options {
            margin-bottom: 24px;
        }

        .ride-options h2 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 16px;
            letter-spacing: -0.3px;
        }

        .ride-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }

        .ride-card {
            background: var(--bg-secondary);
            border-radius: 20px;
            padding: 20px;
            border: 2px solid transparent;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .ride-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--accent-gradient);
            opacity: 0;
            transition: var(--transition);
            z-index: 0;
        }

        .ride-card:hover::before {
            opacity: 0.05;
        }

        .ride-card:hover {
            border-color: var(--accent-primary);
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(0, 255, 136, 0.15);
        }

        .ride-card.active {
            border-color: var(--accent-primary);
            background: linear-gradient(135deg, rgba(0, 255, 136, 0.1) 0%, rgba(0, 204, 255, 0.1) 100%);
        }

        .ride-card-content {
            position: relative;
            z-index: 1;
        }

        .ride-icon {
            font-size: 32px;
            margin-bottom: 12px;
        }

        .ride-name {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 4px;
        }

        .ride-details {
            color: var(--text-secondary);
            font-size: 13px;
            margin-bottom: 8px;
        }

        .ride-price {
            font-weight: 700;
            font-size: 18px;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            font-family: 'JetBrains Mono', monospace;
        }

        /* Promo Section */
        .promo-section {
            background: linear-gradient(135deg, rgba(0, 255, 136, 0.1) 0%, rgba(0, 204, 255, 0.1) 100%);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 24px;
            border: 1px solid rgba(0, 255, 136, 0.2);
            position: relative;
            overflow: hidden;
        }

        .promo-section::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(0, 255, 136, 0.1) 0%, transparent 70%);
            animation: promoGlow 4s ease-in-out infinite;
        }

        @keyframes promoGlow {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(-20%, -20%); }
        }

        .promo-content {
            position: relative;
            z-index: 1;
        }

        .promo-badge {
            display: inline-block;
            background: var(--accent-primary);
            color: var(--bg-primary);
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 700;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .promo-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .promo-desc {
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: 16px;
        }

        .promo-code {
            display: inline-flex;
            align-items: center;
            background: var(--bg-secondary);
            padding: 12px 16px;
            border-radius: 12px;
            border: 1px dashed var(--accent-primary);
            font-family: 'JetBrains Mono', monospace;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .promo-code:hover {
            background: var(--bg-primary);
            transform: scale(1.05);
        }

        /* CTA Button */
        .cta-button {
            width: 100%;
            padding: 18px;
            background: var(--accent-gradient);
            border: none;
            border-radius: 16px;
            color: var(--bg-primary);
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            font-family: 'Outfit', sans-serif;
            box-shadow: 0 8px 24px rgba(0, 255, 136, 0.3);
            position: relative;
            overflow: hidden;
        }

        .cta-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .cta-button:hover::before {
            width: 300px;
            height: 300px;
        }

        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 32px rgba(0, 255, 136, 0.4);
        }

        .cta-button:active {
            transform: translateY(0);
        }

        .cta-button span {
            position: relative;
            z-index: 1;
        }

        /* Bottom Navigation */
        .bottom-nav {
            background: rgba(20, 20, 20, 0.95);
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            padding: 16px 0;
            display: flex;
            justify-content: space-around;
            position: sticky;
            bottom: 0;
            animation: slideUp 0.6s ease-out 0.4s both;
        }

        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            transition: var(--transition);
            padding: 8px 20px;
            border-radius: 12px;
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .nav-item.active {
            color: var(--accent-primary);
        }

        .nav-icon {
            font-size: 24px;
        }

        .nav-label {
            font-size: 12px;
            font-weight: 500;
        }

        /* Quick Actions */
        .quick-actions {
            margin-bottom: 24px;
        }

        .quick-actions h3 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
            letter-spacing: -0.3px;
        }

        .actions-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
        }

        .action-card {
            background: var(--bg-secondary);
            border-radius: 16px;
            padding: 16px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid transparent;
        }

        .action-card:hover {
            background: var(--bg-tertiary);
            border-color: var(--accent-primary);
            transform: translateY(-4px);
        }

        .action-icon {
            font-size: 28px;
            margin-bottom: 8px;
        }

        .action-label {
            font-size: 13px;
            font-weight: 500;
        }

        /* Responsive */
        @media (max-width: 480px) {
            main {
                padding: 16px;
            }

            .greeting h1 {
                font-size: 28px;
            }

            .ride-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Loading animation */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .loading {
            animation: pulse 2s ease-in-out infinite;
        }

        /* Map preview */
        .map-preview {
            background: var(--bg-secondary);
            border-radius: 20px;
            height: 300px;
            margin-bottom: 24px;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        #map {
            width: 100%;
            height: 100%;
            border-radius: 20px;
        }

        .map-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 14px;
            color: var(--text-secondary);
            z-index: 1000;
            background: var(--bg-secondary);
            padding: 12px 20px;
            border-radius: 12px;
            border: 1px solid rgba(0, 255, 136, 0.2);
        }

        .map-overlay {
            position: absolute;
            bottom: 16px;
            left: 16px;
            right: 16px;
            background: rgba(10, 10, 10, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 12px 16px;
            border: 1px solid rgba(0, 255, 136, 0.2);
            z-index: 1000;
        }

        .map-overlay-text {
            font-size: 14px;
            font-weight: 500;
            color: var(--accent-primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .location-accuracy {
            font-size: 12px;
            color: var(--text-secondary);
            margin-left: auto;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <header>
            <div class="logo">TickRide</div>
            <div class="user-avatar">WK</div>
        </header>

        <main>
            <div class="greeting">
                <h1>Where to, Wanjiku?</h1>
                <p>Let's get you moving</p>
            </div>

            <div class="map-preview">
                <div id="map"></div>
                <div class="map-loading" id="map-loading">ğŸ“ Getting your location...</div>
                <div class="map-overlay" id="map-overlay" style="display: none;">
                    <div class="map-overlay-text">
                        <span id="location-text">ğŸ“ Locating...</span>
                        <span class="location-accuracy" id="location-accuracy"></span>
                    </div>
                </div>
            </div>

            <div class="search-card">
                <!-- Route inputs -->
                <div class="route-inputs" id="route-inputs">
                    <div class="route-line"></div>

                    <!-- Pickup -->
                    <div class="search-input" id="pickup-wrap" style="position:relative">
                        <div class="route-dot pickup"></div>
                        <input type="text" id="pickup-input" placeholder="Pickup location" value="Getting locationâ€¦" autocomplete="off" />
                        <button class="input-clear" id="pickup-clear" style="display:none" title="Clear">Ã—</button>
                        <!-- Autocomplete -->
                        <div class="autocomplete-dropdown" id="pickup-dropdown"></div>
                    </div>

                    <!-- Swap button -->
                    <div style="position:relative; height:0; z-index:10">
                        <button class="swap-btn" id="swap-btn" title="Swap pickup & destination">â‡…</button>
                    </div>

                    <!-- Destination -->
                    <div class="search-input" id="dest-wrap" style="position:relative">
                        <div class="route-dot dropoff"></div>
                        <input type="text" id="dest-input" placeholder="Where to?" autocomplete="off" />
                        <button class="input-clear" id="dest-clear" style="display:none" title="Clear">Ã—</button>
                        <!-- Autocomplete -->
                        <div class="autocomplete-dropdown" id="dest-dropdown"></div>
                    </div>
                </div>

                <!-- Route summary (distance / time / fare) -->
                <div class="route-summary" id="route-summary">
                    <div class="rs-item">
                        <div class="rs-value" id="rs-distance">â€”</div>
                        <div class="rs-label">Distance</div>
                    </div>
                    <div class="rs-divider"></div>
                    <div class="rs-item">
                        <div class="rs-value" id="rs-time">â€”</div>
                        <div class="rs-label">Est. Time</div>
                    </div>
                    <div class="rs-divider"></div>
                    <div class="rs-item">
                        <div class="rs-value" id="rs-fare">â€”</div>
                        <div class="rs-label">From</div>
                    </div>
                </div>

                <!-- Saved places -->
                <div class="location-options">
                    <button class="location-btn" data-lat="-1.2897" data-lng="36.7826" data-name="Home â€” Westlands">ğŸ  Home</button>
                    <button class="location-btn" data-lat="-1.2921" data-lng="36.8219" data-name="Work â€” CBD">ğŸ’¼ Work</button>
                    <button class="location-btn" data-lat="-1.3192" data-lng="36.7072" data-name="Karen">â­ Karen</button>
                </div>
            </div>

            <div class="quick-actions">
                <h3>Quick Actions</h3>
                <div class="actions-grid">
                    <a href="activity.html" class="action-card" style="text-decoration: none; color: inherit;">
                        <div class="action-icon">ğŸ”„</div>
                        <div class="action-label">Repeat Trip</div>
                    </a>
                    <a href="schedule.html" class="action-card" style="text-decoration:none; color:inherit;">
                        <div class="action-icon">ğŸ•</div>
                        <div class="action-label">Schedule</div>
                    </a>
                    <div class="action-card" id="share-btn">
                        <div class="action-icon">ğŸ‘¥</div>
                        <div class="action-label">Share Ride</div>
                    </div>
                </div>
            </div>

            <div class="ride-options">
                <h2>Choose Your Ride</h2>
                <div class="ride-grid">
                    <div class="ride-card active" id="card-tickx">
                        <div class="ride-card-content">
                            <div class="ride-icon">ğŸš—</div>
                            <div class="ride-name">TickX</div>
                            <div class="ride-details">2 min away â€¢ 4 seats</div>
                            <div class="ride-price">KSh 450</div>
                        </div>
                    </div>
                    <div class="ride-card" id="card-tickshare">
                        <div class="ride-card-content">
                            <div class="ride-icon">ğŸ‘¥</div>
                            <div class="ride-name">TickShare</div>
                            <div class="ride-details">5 min away â€¢ Shared</div>
                            <div class="ride-price">KSh 280</div>
                        </div>
                    </div>
                    <div class="ride-card" id="card-tickxl">
                        <div class="ride-card-content">
                            <div class="ride-icon">ğŸš™</div>
                            <div class="ride-name">TickXL</div>
                            <div class="ride-details">3 min away â€¢ 6 seats</div>
                            <div class="ride-price">KSh 680</div>
                        </div>
                    </div>
                    <div class="ride-card" id="card-tickpremium">
                        <div class="ride-card-content">
                            <div class="ride-icon">âš¡</div>
                            <div class="ride-name">TickPremium</div>
                            <div class="ride-details">4 min away â€¢ Luxury</div>
                            <div class="ride-price">KSh 900</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="promo-section">
                <div class="promo-content">
                    <div class="promo-badge">Limited Offer</div>
                    <div class="promo-title">Save 25% on your next 3 rides</div>
                    <div class="promo-desc">New users get exclusive discount on rides this week</div>
                    <div class="promo-code">
                        <span>TICK25</span>
                        <span style="margin-left: 8px;">ğŸ“‹</span>
                    </div>
                </div>
            </div>

            <button class="cta-button">
                <span>Request TickX Now</span>
            </button>
        </main>

        <nav class="bottom-nav">
            <a href="index.html" class="nav-item active">
                <div class="nav-icon">ğŸ </div>
                <div class="nav-label">Home</div>
            </a>
            <a href="activity.html" class="nav-item">
                <div class="nav-icon">ğŸ—“ï¸</div>
                <div class="nav-label">Activity</div>
            </a>
            <a href="payment.html" class="nav-item">
                <div class="nav-icon">ğŸ’³</div>
                <div class="nav-label">Payment</div>
            </a>
            <a href="account.html" class="nav-item">
                <div class="nav-icon">ğŸ‘¤</div>
                <div class="nav-label">Account</div>
            </a>
        </nav>
    </div>

    <!-- Leaflet JS for Interactive Maps -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <script>
    // â”€â”€â”€ CONSTANTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const LOCALE    = 'en-KE';
    const CURRENCY  = 'KES';
    const NAIROBI   = { lat: -1.2921, lng: 36.8219 };

    // Fare structure: base + per-km rate (KSh)
    const TIERS = [
        { id: 'tickx',       name: 'TickX',       icon: 'ğŸš—', seats: '4 seats', baseKm: 80, rateKm: 55,  etaMult: 1.0 },
        { id: 'tickshare',   name: 'TickShare',   icon: 'ğŸ‘¥', seats: 'Shared',  baseKm: 50, rateKm: 35,  etaMult: 1.3 },
        { id: 'tickxl',      name: 'TickXL',      icon: 'ğŸš™', seats: '6 seats', baseKm: 100,rateKm: 75,  etaMult: 1.1 },
        { id: 'tickpremium', name: 'TickPremium', icon: 'âš¡', seats: 'Luxury',  baseKm: 150,rateKm: 110, etaMult: 1.15 },
    ];

    const SAVED_PLACES = {
        home: { lat: -1.2897, lng: 36.7826, name: 'Home â€” Westlands' },
        work: { lat: -1.2921, lng: 36.8219, name: 'Work â€” CBD'        },
        karen:{ lat: -1.3192, lng: 36.7072, name: 'Karen'              },
    };

    // â”€â”€â”€ STATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    let map, pickupMarker, destMarker, routePolyline;
    let pickup  = { lat: null, lng: null, name: '' };
    let dest    = { lat: null, lng: null, name: '' };
    let selectedTier = 'tickx';
    let acTimers = {};

    // â”€â”€â”€ UTILS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function fmt(n) {
        return new Intl.NumberFormat(LOCALE, { style:'currency', currency:CURRENCY,
            minimumFractionDigits:0, maximumFractionDigits:0 }).format(n).replace('KES','KSh');
    }

    // Haversine distance in km
    function haversine(lat1, lng1, lat2, lng2) {
        const R = 6371;
        const dLat = (lat2 - lat1) * Math.PI / 180;
        const dLng = (lng2 - lng1) * Math.PI / 180;
        const a = Math.sin(dLat/2)**2 +
                  Math.cos(lat1*Math.PI/180) * Math.cos(lat2*Math.PI/180) * Math.sin(dLng/2)**2;
        return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
    }

    // Road distance â‰ˆ straight-line Ã— 1.35 (Nairobi factor)
    function roadDist(km) { return km * 1.35; }

    function calcFare(tier, km) {
        return Math.round(tier.baseKm + tier.rateKm * km);
    }

    function calcETA(km, mult) {
        // avg 25 km/h in Nairobi traffic
        const mins = Math.round((km / 25) * 60 * mult);
        return mins < 60 ? `${mins} min` : `${Math.floor(mins/60)}h ${mins%60}m`;
    }

    // â”€â”€â”€ MAP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function initMap(lat, lng) {
        map = L.map('map', { zoomControl: false, scrollWheelZoom: false }).setView([lat, lng], 14);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Â© OpenStreetMap', maxZoom: 19
        }).addTo(map);

        L.control.zoom({ position: 'topright' }).addTo(map);

        setPickupMarker(lat, lng);
    }

    function setPickupMarker(lat, lng) {
        const icon = L.divIcon({
            className: '',
            html: `<div style="width:38px;height:38px;background:linear-gradient(135deg,#00ff88,#00ccff);border-radius:50%;border:3px solid #0a0a0a;display:flex;align-items:center;justify-content:center;font-size:17px;box-shadow:0 4px 14px rgba(0,255,136,.5);animation:markerPulse 2s infinite">ğŸ“</div>`,
            iconSize: [38,38], iconAnchor: [19,19]
        });
        if (pickupMarker) map.removeLayer(pickupMarker);
        pickupMarker = L.marker([lat, lng], { icon }).addTo(map).bindPopup('<b>ğŸ“ Your pickup</b>');
    }

    function setDestMarker(lat, lng, name) {
        const icon = L.divIcon({
            className: '',
            html: `<div style="width:38px;height:38px;background:linear-gradient(135deg,#00ccff,#0066ff);border-radius:50%;border:3px solid #0a0a0a;display:flex;align-items:center;justify-content:center;font-size:17px;box-shadow:0 4px 14px rgba(0,204,255,.5)">ğŸ¯</div>`,
            iconSize: [38,38], iconAnchor: [19,19]
        });
        if (destMarker) map.removeLayer(destMarker);
        destMarker = L.marker([lat, lng], { icon }).addTo(map).bindPopup(`<b>ğŸ¯ ${name}</b>`).openPopup();
    }

    function drawRoute(p, d) {
        if (routePolyline) map.removeLayer(routePolyline);

        // Curve simulation: midpoint slightly offset for visual interest
        const midLat = (p.lat + d.lat) / 2 + (d.lng - p.lng) * 0.06;
        const midLng = (p.lng + d.lng) / 2 - (d.lat - p.lat) * 0.06;

        const pts = [];
        for (let i = 0; i <= 20; i++) {
            const t = i / 20;
            pts.push([
                (1-t)**2 * p.lat + 2*(1-t)*t * midLat + t**2 * d.lat,
                (1-t)**2 * p.lng + 2*(1-t)*t * midLng + t**2 * d.lng
            ]);
        }

        routePolyline = L.polyline(pts, {
            color: '#00ff88', weight: 4, opacity: .85,
            dashArray: '8 5', lineCap: 'round', lineJoin: 'round'
        }).addTo(map);

        map.fitBounds(routePolyline.getBounds(), { padding: [48, 48] });
    }

    // â”€â”€â”€ FARES & SUMMARY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function updateFares() {
        if (!pickup.lat || !dest.lat) return;

        const straight = haversine(pickup.lat, pickup.lng, dest.lat, dest.lng);
        const km       = roadDist(straight);

        // Update route summary strip
        document.getElementById('rs-distance').textContent =
            km < 1 ? `${Math.round(km*1000)} m` : `${km.toFixed(1)} km`;
        document.getElementById('rs-time').textContent = calcETA(km, 1.0);
        document.getElementById('rs-fare').textContent  = fmt(calcFare(TIERS[0], km));
        document.getElementById('route-summary').classList.add('visible');

        // Update every ride card
        TIERS.forEach(tier => {
            const fare = calcFare(tier, km);
            const eta  = calcETA(km, tier.etaMult);
            const card = document.getElementById(`card-${tier.id}`);
            if (!card) return;
            card.querySelector('.ride-price').textContent   = fmt(fare);
            card.querySelector('.ride-details').textContent = `${eta} Â· ${tier.seats}`;
        });

        // Update CTA
        updateCTA();
    }

    function updateCTA() {
        const tier = TIERS.find(t => t.id === selectedTier);
        if (!tier) return;
        const btn = document.querySelector('.cta-button span');
        if (pickup.lat && dest.lat) {
            const km   = roadDist(haversine(pickup.lat, pickup.lng, dest.lat, dest.lng));
            const fare = fmt(calcFare(tier, km));
            btn.textContent = `Request ${tier.name} â€” ${fare}`;
        } else if (!dest.lat) {
            btn.textContent = 'Enter destination to continue';
        } else {
            btn.textContent = `Request ${tier.name}`;
        }
    }

    // â”€â”€â”€ AUTOCOMPLETE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function showDropdown(id, html) {
        const el = document.getElementById(id);
        el.innerHTML = html;
        el.classList.add('visible');
    }
    function hideDropdown(id) {
        const el = document.getElementById(id);
        if (el) { el.classList.remove('visible'); el.innerHTML = ''; }
    }

    async function searchPlaces(query, dropdownId, onSelect) {
        if (query.length < 2) { hideDropdown(dropdownId); return; }

        showDropdown(dropdownId, '<div class="ac-loading">ğŸ” Searchingâ€¦</div>');

        clearTimeout(acTimers[dropdownId]);
        acTimers[dropdownId] = setTimeout(async () => {
            try {
                const url = `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}&limit=5&countrycodes=ke&viewbox=36.6,-1.5,37.2,-1.0&bounded=0&addressdetails=1`;
                const res  = await fetch(url, { headers: { 'User-Agent': 'TickRide/1.0 (rakara.github.io)' } });
                const data = await res.json();

                if (!data.length) {
                    showDropdown(dropdownId, '<div class="ac-empty">No results found. Try a different name.</div>');
                    return;
                }

                const html = data.map(item => {
                    const addr  = item.address;
                    const short = addr.suburb || addr.neighbourhood || addr.town || addr.city || '';
                    const long  = [addr.city || addr.county, 'Kenya'].filter(Boolean).join(', ');
                    const icon  = item.type === 'hospital' ? 'ğŸ¥' :
                                  item.type === 'school'   ? 'ğŸ«' :
                                  item.type === 'mall'     ? 'ğŸ¬' :
                                  item.class === 'highway' ? 'ğŸ›£ï¸' : 'ğŸ“';
                    return `<div class="ac-item" data-lat="${item.lat}" data-lng="${item.lon}" data-name="${short || item.display_name.split(',')[0]}">
                        <div class="ac-icon">${icon}</div>
                        <div>
                            <div class="ac-name">${short || item.display_name.split(',')[0]}</div>
                            <div class="ac-address">${item.display_name.split(',').slice(0,3).join(', ')}</div>
                        </div>
                    </div>`;
                }).join('');
                showDropdown(dropdownId, html);

                // Bind clicks
                document.querySelectorAll(`#${dropdownId} .ac-item`).forEach(el => {
                    el.addEventListener('mousedown', (e) => {
                        e.preventDefault();
                        onSelect(
                            parseFloat(el.dataset.lat),
                            parseFloat(el.dataset.lng),
                            el.dataset.name
                        );
                        hideDropdown(dropdownId);
                    });
                });

            } catch (err) {
                showDropdown(dropdownId, '<div class="ac-empty">Search unavailable. Check connection.</div>');
            }
        }, 380);
    }

    // â”€â”€â”€ GEOCODING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    async function reverseGeocode(lat, lng) {
        try {
            const res  = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}&zoom=18&addressdetails=1`,
                { headers: { 'User-Agent': 'TickRide/1.0' } });
            const data = await res.json();
            const a    = data.address;
            const sub  = a.suburb || a.neighbourhood || a.residential;
            const city = a.city || a.town || a.county;
            return sub && city ? `${sub}, ${city}` : city || data.display_name.split(',').slice(0,2).join(',');
        } catch { return 'Nairobi, Kenya'; }
    }

    // â”€â”€â”€ SET LOCATIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function setPickup(lat, lng, name) {
        pickup = { lat, lng, name };
        document.getElementById('pickup-input').value = name;
        document.getElementById('pickup-clear').style.display = 'block';
        if (map) setPickupMarker(lat, lng);
        if (dest.lat) { drawRoute(pickup, dest); updateFares(); }
        hideDropdown('pickup-dropdown');
    }

    function setDestination(lat, lng, name) {
        dest = { lat, lng, name };
        document.getElementById('dest-input').value   = name;
        document.getElementById('dest-clear').style.display = 'block';
        if (map) {
            setDestMarker(lat, lng, name);
            if (pickup.lat) { drawRoute(pickup, dest); updateFares(); }
            else map.setView([lat, lng], 14);
        }
        hideDropdown('dest-dropdown');
        updateCTA();
    }

    // â”€â”€â”€ GEOLOCATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function getUserLocation() {
        const loading = document.getElementById('map-loading');
        const overlay = document.getElementById('map-overlay');
        const locText = document.getElementById('location-text');
        const locAcc  = document.getElementById('location-accuracy');

        const success = async (pos) => {
            const { latitude: lat, longitude: lng, accuracy } = pos.coords;
            initMap(lat, lng);
            const name = await reverseGeocode(lat, lng);
            loading.style.display = 'none';
            overlay.style.display = 'block';
            locText.innerHTML = `ğŸ“ ${name}`;
            locAcc.textContent  = `Â±${Math.round(accuracy)}m`;
            setPickup(lat, lng, name);
        };

        const fail = () => {
            const { lat, lng } = NAIROBI;
            initMap(lat, lng);
            loading.style.display = 'none';
            overlay.style.display = 'block';
            locText.innerHTML = 'ğŸ“ Nairobi CBD';
            locAcc.textContent = 'Default location';
            setPickup(lat, lng, 'Nairobi CBD');
        };

        if ('geolocation' in navigator) {
            navigator.geolocation.getCurrentPosition(success, fail, { enableHighAccuracy: true, timeout: 10000 });
        } else { fail(); }
    }

    // â”€â”€â”€ WIRE UP INPUTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function wireInput(inputId, clearId, dropdownId, onSelect) {
        const input = document.getElementById(inputId);
        const clear = document.getElementById(clearId);

        input.addEventListener('input', () => {
            clear.style.display = input.value ? 'block' : 'none';
            searchPlaces(input.value, dropdownId, onSelect);
        });

        input.addEventListener('focus', () => {
            if (input.value.length >= 2) searchPlaces(input.value, dropdownId, onSelect);
        });

        input.addEventListener('blur', () => {
            // Slight delay so mousedown on item fires first
            setTimeout(() => hideDropdown(dropdownId), 200);
        });

        clear.addEventListener('click', () => {
            input.value = '';
            clear.style.display = 'none';
            hideDropdown(dropdownId);
            if (inputId === 'dest-input') {
                dest = { lat: null, lng: null, name: '' };
                if (destMarker) { map.removeLayer(destMarker); destMarker = null; }
                if (routePolyline) { map.removeLayer(routePolyline); routePolyline = null; }
                document.getElementById('route-summary').classList.remove('visible');
                if (pickup.lat) map.setView([pickup.lat, pickup.lng], 14);
                // Reset fares to defaults
                resetFares();
            } else {
                pickup = { lat: null, lng: null, name: '' };
                if (pickupMarker) { map.removeLayer(pickupMarker); pickupMarker = null; }
            }
            updateCTA();
        });
    }

    function resetFares() {
        const defaults = [450, 280, 680, 900];
        const etas     = ['2 min Â· 4 seats', '5 min Â· Shared', '3 min Â· 6 seats', '4 min Â· Luxury'];
        TIERS.forEach((tier, i) => {
            const card = document.getElementById(`card-${tier.id}`);
            if (!card) return;
            card.querySelector('.ride-price').textContent   = `KSh ${defaults[i]}`;
            card.querySelector('.ride-details').textContent = etas[i];
        });
        updateCTA();
    }

    // â”€â”€â”€ SWAP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    document.getElementById('swap-btn').addEventListener('click', () => {
        if (!pickup.lat || !dest.lat) return;
        const tmp = { ...pickup };
        setPickup(dest.lat, dest.lng, dest.name);
        setDestination(tmp.lat, tmp.lng, tmp.name);
    });

    // â”€â”€â”€ SAVED PLACE BUTTONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    document.querySelectorAll('.location-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const lat  = parseFloat(btn.dataset.lat);
            const lng  = parseFloat(btn.dataset.lng);
            const name = btn.dataset.name;
            setDestination(lat, lng, name);
        });
    });

    // â”€â”€â”€ RIDE CARD SELECTION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    document.querySelectorAll('.ride-card').forEach(card => {
        card.addEventListener('click', function() {
            document.querySelectorAll('.ride-card').forEach(c => c.classList.remove('active'));
            this.classList.add('active');
            selectedTier = this.id.replace('card-', '');
            updateCTA();
        });
    });

    // â”€â”€â”€ CTA BUTTON â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    document.querySelector('.cta-button').addEventListener('click', function() {
        if (!dest.lat) {
            document.getElementById('dest-input').focus();
            document.getElementById('dest-input').style.borderColor = 'var(--accent-primary)';
            return;
        }
        
        // Save trip data to localStorage for confirmation screen
        const km    = roadDist(haversine(pickup.lat, pickup.lng, dest.lat, dest.lng));
        const tier  = TIERS.find(t => t.id === selectedTier);
        const fare  = calcFare(tier, km);
        const time  = calcETA(km, tier.etaMult);
        const dist  = km < 1 ? `${Math.round(km*1000)} m` : `${km.toFixed(1)} km`;
        
        localStorage.setItem('tripPickup', JSON.stringify(pickup));
        localStorage.setItem('tripDest', JSON.stringify(dest));
        localStorage.setItem('tripTier', tier.name);
        localStorage.setItem('tripFare', fmt(fare));
        localStorage.setItem('tripDistance', dist);
        localStorage.setItem('tripTime', time);
        
        // Navigate to confirmation
        window.location.href = 'trip-confirm.html';
    });

    // â”€â”€â”€ PROMO CODE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    document.querySelector('.promo-code').addEventListener('click', function() {
        const code = this.querySelector('span').textContent;
        navigator.clipboard?.writeText(code).then(() => {
            this.style.background = 'var(--accent-primary)';
            this.style.color = 'var(--bg-primary)';
            setTimeout(() => { this.style.background=''; this.style.color=''; }, 1000);
        });
    });

    // â”€â”€â”€ PULSE ANIMATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const s = document.createElement('style');
    s.textContent = `
        @keyframes markerPulse {
            0%,100% { transform: scale(1); }
            50%      { transform: scale(1.12); }
        }
        @keyframes ripple {
            to { transform: scale(4); opacity: 0; }
        }
    `;
    document.head.appendChild(s);

    // Ripple on buttons
    document.querySelectorAll('.location-btn, .action-card, .ride-card').forEach(el => {
        el.addEventListener('click', function(e) {
            const r    = document.createElement('div');
            const rect = this.getBoundingClientRect();
            const sz   = Math.max(rect.width, rect.height);
            Object.assign(r.style, {
                width: sz+'px', height: sz+'px',
                left: (e.clientX - rect.left - sz/2)+'px',
                top:  (e.clientY - rect.top  - sz/2)+'px',
                position:'absolute', borderRadius:'50%',
                background:'rgba(0,255,136,.25)',
                transform:'scale(0)', animation:'ripple .6s ease-out',
                pointerEvents:'none'
            });
            this.style.position = 'relative';
            this.style.overflow = 'hidden';
            this.appendChild(r);
            setTimeout(() => r.remove(), 600);
        });
    });

    // â”€â”€â”€ BOOT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    wireInput('pickup-input', 'pickup-clear', 'pickup-dropdown',
        (lat, lng, name) => setPickup(lat, lng, name));
    wireInput('dest-input', 'dest-clear', 'dest-dropdown',
        (lat, lng, name) => setDestination(lat, lng, name));

    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/ride/sw.js').catch(()=>{});
    }
    window.addEventListener('load', getUserLocation);
    </script>
</body>
</html>
